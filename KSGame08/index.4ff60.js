window.__require=function t(e,n,i){function o(a,s){if(!n[a]){if(!e[a]){var l=a.split("/");if(l=l[l.length-1],!e[l]){var c="function"==typeof __require&&__require;if(!s&&c)return c(l,!0);if(r)return r(l,!0);throw new Error("Cannot find module '"+a+"'")}a=l}var u=n[a]={exports:{}};e[a][0].call(u.exports,function(t){return o(e[a][1][t]||t)},u,u.exports,t,e,n,i)}return n[a].exports}for(var r="function"==typeof __require&&__require,a=0;a<i.length;a++)o(i[a]);return o}({KSGame08:[function(t,e,n){"use strict";cc._RF.push(e,"2fef68XxERJWpa7FErEfev2","KSGame08");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(o,r){function a(t){try{l(i.next(t))}catch(e){r(e)}}function s(t){try{l(i.throw(t))}catch(e){r(e)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}l((i=i.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return l([t,e])}}function l(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(s){r=[6,s],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var l=cc._decorator,c=l.ccclass,u=l.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.music=[],e.title0=null,e.title1=null,e.title3=null,e.label=null,e.importlabel=null,e.labelTips=null,e.Uboat=null,e.aqueduct=null,e}return o(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){this.resData=window.KS.GetInfo(),this.currentData=this.resData.res[0],console.log(this.resData),this.label.string="\u4f20\u5165\u6570\u636e\uff1a"+JSON.stringify(this.resData.res[0].formula),this.updateTileShow()},e.prototype.onEnable=function(){},e.prototype.onDisable=function(){},e.prototype.inputImpot=function(t){console.log(t.target._name);var e=t.target._name;""===this.title0.string?(this.title0.string=e,this.nullTitle=this.title0):""===this.title1.string?(this.title1.string=e,this.nullTitle=this.title1):this.nullTitle.string=e},e.prototype.comfirm=function(){return a(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return this.nullTitle.string!=this.currentData.result?[3,3]:(cc.log("ok"),this.labelTips.string="\u771f\u68d2\uff01\u4f60\u771f\u5389\u5bb3\uff01",this.labelTips.node.opacity=255,[4,this.moveUboat()]);case 1:return t.sent(),[4,window.KS.KSPlaySound(Math.random()>.5?1:2)];case 2:return t.sent(),this.nextRound(),[3,5];case 3:return this.labelTips.string="\u4e0d\u5bf9\u54e6\uff01\u518d\u627e\u627e\u5427\uff01",this.labelTips.node.opacity=255,cc.audioEngine.play(this.music[1],!1,1),[4,window.KS.KSPlaySound(Math.random()>.5?3:4)];case 4:t.sent(),this.cancel(),t.label=5;case 5:return[2]}})})},e.prototype.cancel=function(){this.nullTitle.string=""},e.prototype.nextRound=function(){return a(this,void 0,void 0,function(){var t=this;return s(this,function(e){switch(e.label){case 0:return this.resData.res=this.resData.res.filter(function(e){return e!=t.currentData}),this.currentData=this.randomArray(this.resData.res),console.log(this.resData.res),0!=this.resData.res.length?[3,2]:(this.label.string="\u7ed3\u675f\u4e86",[4,this.wait(3)]);case 1:return e.sent(),this.close(),[3,3];case 2:this.label.string="\u4f20\u5165\u6570\u636e\uff1a"+JSON.stringify(this.currentData),this.closeTile(),this.updateTileShow(),this.initUboat(),e.label=3;case 3:return[2]}})})},e.prototype.close=function(){this.node.destroy(),window.KS.Close()},e.prototype.randomArray=function(t){return t[Math.floor(Math.random()*t.length)]},e.prototype.wait=function(t){return a(this,void 0,void 0,function(){return s(this,function(){return[2,new Promise(function(e){setTimeout(function(){e()},1e3*t)})]})})},e.prototype.update=function(t){this.labelTips.node.opacity-=100*t,this.labelTips.node.opacity<0&&(this.labelTips.node.opacity=0)},e.prototype.catchNum=function(t){var e=t.match(/[^\xd7=]+/g);return e?{a1:e[0],a2:e[1],a3:e[2]}:null},e.prototype.updateTileShow=function(){var t=this.catchNum(JSON.stringify(this.currentData.formula).slice(1,-1));console.log(t),this.title0.string="__"===t.a1?"":t.a1,this.title1.string="__"===t.a2?"":t.a2,this.title3.string="__"===t.a3?"":t.a3,""===this.title0.string?this.title0.node.getChildByName("New Sprite").active=!0:""===this.title1.string&&(this.title1.node.getChildByName("New Sprite").active=!0)},e.prototype.closeTile=function(){this.title0.node.getChildByName("New Sprite").active=!1,this.title1.node.getChildByName("New Sprite").active=!1},e.prototype.moveUboat=function(){var t=this;return new Promise(function(e){cc.audioEngine.play(t.music[0],!1,1),t.aqueduct.getComponent(sp.Skeleton).animation="animation",cc.tween(t.Uboat).to(1,{scale:.1},{easing:"sineInOut"}).start(),cc.audioEngine.play(t.music[2],!1,10),cc.tween(t.Uboat).to(2,{position:cc.v3(t.Uboat.x-1500,t.Uboat.y)},{easing:"sineInOut"}).call(function(){e()}).start()})},e.prototype.initUboat=function(){var t=this;this.Uboat.setPosition(1300,this.Uboat.y),cc.tween(this.Uboat).to(1,{position:cc.v3(215.238,this.Uboat.y)},{easing:"sineInOut"}).start(),cc.tween(this.Uboat).to(2,{scale:1},{easing:"sineInOut"}).call(function(){t.aqueduct.getComponent(sp.Skeleton).clearTracks()}).start()},r([u([cc.AudioClip])],e.prototype,"music",void 0),r([u(cc.Label)],e.prototype,"title0",void 0),r([u(cc.Label)],e.prototype,"title1",void 0),r([u(cc.Label)],e.prototype,"title3",void 0),r([u(cc.Label)],e.prototype,"label",void 0),r([u(cc.Label)],e.prototype,"importlabel",void 0),r([u(cc.Label)],e.prototype,"labelTips",void 0),r([u(cc.Node)],e.prototype,"Uboat",void 0),r([u(cc.Node)],e.prototype,"aqueduct",void 0),r([c],e)}(cc.Component);n.default=p,cc._RF.pop()},{}]},{},["KSGame08"]);
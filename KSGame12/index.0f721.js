window.__require=function t(e,n,o){function r(s,a){if(!n[s]){if(!e[s]){var c=s.split("/");if(c=c[c.length-1],!e[c]){var u="function"==typeof __require&&__require;if(!a&&u)return u(c,!0);if(i)return i(c,!0);throw new Error("Cannot find module '"+s+"'")}s=c}var l=n[s]={exports:{}};e[s][0].call(l.exports,function(t){return r(e[s][1][t]||t)},l,l.exports,t,e,n,o)}return n[s].exports}for(var i="function"==typeof __require&&__require,s=0;s<o.length;s++)r(o[s]);return r}({KSGame12:[function(t,e,n){"use strict";cc._RF.push(e,"f707dCrG95O3L2ovg1Lsr8w","KSGame12");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,s=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,n,s):r(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s},s=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function s(t){try{c(o.next(t))}catch(e){i(e)}}function a(t){try{c(o.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}c((o=o.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var n,o,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return c([t,e])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(a){i=[6,a],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var c=t("./animals"),u=cc._decorator,l=u.ccclass,f=u.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.answer=null,e.bridgeo=null,e.LeftNode=null,e.RightNode=null,e.LeftNums=0,e.RightNums=0,e.labelTips=null,e.NumofAns=0,e.lastInteractionTime=0,e}return r(e,t),e.prototype.onLoad=function(){this.lastInteractionTime=Date.now()},e.prototype.start=function(){this.LeftNode.getComponent(c.default).RandomNumbers(),this.RightNode.getComponent(c.default).RandomNumbers(),this.LeftNode.getComponent(c.default).generateRandomSprites("right"),this.RightNode.getComponent(c.default).generateRandomSprites("left"),this.LeftNums=this.LeftNode.getComponent(c.default).numberOfSprites,this.RightNums=this.RightNode.getComponent(c.default).numberOfSprites},e.prototype.createAnimals=function(){this.LeftNode.getComponent(c.default).destroyAnimals(),this.LeftNode.getComponent(c.default).RandomNumbers(),this.LeftNode.getComponent(c.default).generateRandomSprites("right"),this.RightNode.getComponent(c.default).destroyAnimals(),this.RightNode.getComponent(c.default).RandomNumbers(),this.RightNode.getComponent(c.default).generateRandomSprites("left"),this.LeftNums=this.LeftNode.getComponent(c.default).numberOfSprites,this.RightNums=this.RightNode.getComponent(c.default).numberOfSprites,this.bridgeo.active=!1},e.prototype.onEnable=function(){},e.prototype.onDisable=function(){},e.prototype.checkUserTimeout=function(){var t=Date.now();t-this.lastInteractionTime>1e4&&(console.log("\u5341\u79d2\u672a\u64cd\u4f5c\u8bed\u97f3"),this.lastInteractionTime=t)},e.prototype.inputImpot=function(t){this.lastInteractionTime=Date.now();var e=t.target._name;this.answer.string=e,this.answer.node.active=!0,this.comfirm(e)},e.prototype.comfirm=function(t){return s(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return[4,new Promise(function(t){return setTimeout(t,1e3)})];case 1:return e.sent(),"="!==t||this.LeftNums!==this.RightNums?[3,3]:(console.log("\u7b54\u5bf9\u4e86"),this.istrue(),this.bridgeo.active=!0,this.cancel(),this.LeftNode.getComponent(c.default).moveSprites("left",700),[4,this.RightNode.getComponent(c.default).moveSprites("right",700,!0)]);case 2:return e.sent(),this.createAnimals(),[2];case 3:return">"===t&&this.LeftNums>this.RightNums?(console.log("\u7b54\u5bf9\u4e86"),this.istrue(),this.bridgeo.active=!0,this.cancel(),this.RightNode.getComponent(c.default).moveSprites("right",700,!0),[4,this.LeftNode.getComponent(c.default).moveSprites("right",1700,!0)]):[3,5];case 4:return e.sent(),this.createAnimals(),[2];case 5:return"<"===t&&this.LeftNums<this.RightNums?(console.log("\u7b54\u5bf9\u4e86"),this.istrue(),this.bridgeo.active=!0,this.cancel(),this.LeftNode.getComponent(c.default).moveSprites("left",700),[4,this.RightNode.getComponent(c.default).moveSprites("left",1700)]):[3,7];case 6:return e.sent(),this.createAnimals(),[2];case 7:return this.labelTips.string="\u4e0d\u5bf9\u54e6\uff01\u518d\u627e\u627e\u5427\uff01",this.labelTips.node.opacity=255,this.NumofAns=0,cc.log("not ok"),this.cancel(),console.log("NumofAns:  "+this.NumofAns),[2]}})})},e.prototype.cancel=function(){this.answer.string="",this.answer.node.active=!1},e.prototype.nextRound=function(){return s(this,void 0,void 0,function(){return a(this,function(){return[2]})})},e.prototype.close=function(){this.node.destroy(),window.KS.Close()},e.prototype.randomArray=function(t){return t[Math.floor(Math.random()*t.length)]},e.prototype.wait=function(t){return s(this,void 0,void 0,function(){return a(this,function(){return[2,new Promise(function(e){setTimeout(function(){e()},1e3*t)})]})})},e.prototype.update=function(t){this.labelTips.node.opacity-=100*t,this.labelTips.node.opacity<0&&(this.labelTips.node.opacity=0),this.checkUserTimeout()},e.prototype.istrue=function(){return s(this,void 0,void 0,function(){var t,e;return a(this,function(n){switch(n.label){case 0:this.NumofAns++,console.log("\u8fde\u5bf9\u6b21\u6570"+this.NumofAns),this.labelTips.string="\u771f\u68d2\uff01\u4f60\u771f\u5389\u5bb3\uff01",this.labelTips.node.opacity=255,this.NumofAns++,t=new Promise(function(t,e){window.KS.KSPlaySound(Math.random()>.5?1:2,function(n){"success"===n?t():e(new Error("Sound playback failed"))})}),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,t];case 2:return n.sent(),[3,4];case 3:return e=n.sent(),console.error(e),[3,4];case 4:return[2]}})})},i([f(cc.Label)],e.prototype,"answer",void 0),i([f(cc.Node)],e.prototype,"bridgeo",void 0),i([f(cc.Node)],e.prototype,"LeftNode",void 0),i([f(cc.Node)],e.prototype,"RightNode",void 0),i([f(cc.Label)],e.prototype,"labelTips",void 0),i([l],e)}(cc.Component);n.default=p,cc._RF.pop()},{"./animals":"animals"}],animals:[function(t,e,n){"use strict";cc._RF.push(e,"041a2zYyZJDEp13TuCQTxyE","animals");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,s=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,n,s):r(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s},s=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function s(t){try{c(o.next(t))}catch(e){i(e)}}function a(t){try{c(o.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}c((o=o.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var n,o,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return c([t,e])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(a){i=[6,a],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var c=cc._decorator,u=c.ccclass,l=c.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spritePrefabs=[],e.music=[],e.movedistance=500,e.selectedSpritePrefab=null,e}return r(e,t),e.prototype.onLoad=function(){this.schedule(this.playRandomMusic,3*Math.random()+3)},e.prototype.generateRandomSprites=function(t){var e=this;if(this.spritePrefabs.length>0){var n=Math.floor(Math.random()*this.spritePrefabs.length);this.selectedSpritePrefab=this.spritePrefabs[n]}var o=this.node;if(o&&this.selectedSpritePrefab)for(var r=o.width,i=o.height,s=.5*Math.max(100,100),a=[],c=function(){for(var n=cc.instantiate(u.selectedSpritePrefab),c=(n.getComponent(cc.Sprite),!1),l=void 0,f=void 0;!c;)l=Math.random()*(r-100)-r/2+50,f=Math.random()*(i-100)-i/2+50,c=u.isValidSpritePosition(l,f,s,a,r,i);a.push({x:l,y:f}),n.setPosition(l+("left"===t?1e3:-1e3),f),o.addChild(n),n.getComponent(sp.Skeleton).animation=u.selectedSpritePrefab.name+"_run",cc.audioEngine.play(u.music[3],!1,2),cc.tween(n).to(2,{x:l,y:f}).call(function(){cc.audioEngine.stopAll(),n.getComponent(sp.Skeleton).animation=e.selectedSpritePrefab.name+"_idle"}).start()},u=this,l=0;l<this.numberOfSprites;l++)c();else cc.error("Please assign the Left node and at least one Sprite Prefab in the component.")},e.prototype.isValidSpritePosition=function(t,e,n,o,r,i){if(t-n<-r/2||t+n>r/2||e-n<-i/2||e+n>i/2)return!1;for(var s=0,a=o;s<a.length;s++){var c=a[s];if(cc.Vec2(t-c.x,e-c.y).mag()<2*n)return!1}return!0},e.prototype.destroyAnimals=function(){this.node.removeAllChildren()},e.prototype.RandomNumbers=function(){var t=Math.floor(9*Math.random())+1;this.numberOfSprites=t},e.prototype.moveSprites=function(t,e,n){return void 0===n&&(n=!1),s(this,void 0,void 0,function(){var o,r,i,s,c,u;return a(this,function(a){switch(a.label){case 0:for(o=this.node,r=o.children,i=[],s=function(o){var s=r[o];s.getComponent(sp.Skeleton).animation=c.selectedSpritePrefab.name+"_run";var a=s.x;n&&(s.scaleX=-1);var u="left"===t?a-e:a+e,l=Math.abs(u-a)/e*3;cc.audioEngine.play(c.music[3],!1,2);var f=new Promise(function(t){cc.tween(s).to(2,{y:0}).call(function(){t()}).start()}),p=new Promise(function(t){cc.tween(s).to(l,{x:u}).call(function(){t()}).start()});i.push(f,p)},c=this,u=0;u<r.length;u++)s(u);return[4,Promise.all(i)];case 1:return a.sent(),cc.audioEngine.stopAll(),[2]}})})},e.prototype.playRandomMusic=function(){var t;switch(this.selectedSpritePrefab.name){case"cow":t=0;break;case"pig":t=1;break;case"sheep":t=2;break;default:t=0}cc.audioEngine.play(this.music[t],!1,1)},i([l([cc.Prefab])],e.prototype,"spritePrefabs",void 0),i([l([cc.AudioClip])],e.prototype,"music",void 0),i([u],e)}(cc.Component);n.default=f,cc._RF.pop()},{}]},{},["KSGame12","animals"]);
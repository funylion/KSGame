window.__require=function t(e,n,o){function i(s,a){if(!n[s]){if(!e[s]){var c=s.split("/");if(c=c[c.length-1],!e[c]){var l="function"==typeof __require&&__require;if(!a&&l)return l(c,!0);if(r)return r(c,!0);throw new Error("Cannot find module '"+s+"'")}s=c}var h=n[s]={exports:{}};e[s][0].call(h.exports,function(t){return i(e[s][1][t]||t)},h,h.exports,t,e,n,o)}return n[s].exports}for(var r="function"==typeof __require&&__require,s=0;s<o.length;s++)i(o[s]);return i}({KSGame05:[function(t,e,n){"use strict";cc._RF.push(e,"cb1dfw498NGDoOKRyiD5KaD","KSGame05");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},s=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function s(t){try{c(o.next(t))}catch(e){r(e)}}function a(t){try{c(o.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}c((o=o.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var n,o,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(t){return function(e){return c([t,e])}}function c(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,o=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(a){r=[6,a],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var c=cc._decorator,l=c.ccclass,h=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.music=[],e.leftScaleLabel=null,e.rightNumberLabel=null,e.selectLabel0=null,e.selectLabel1=null,e.selectLabel2=null,e.pole=null,e.answer=null,e.title=null,e.imageNodes=[],e.leftScaleNode=null,e.rightScaleNode=null,e.signNode=null,e.comparisonSymbolSprites=[],e.isTouching=!1,e.titlelabel=null,e.answerlabel=null,e.selectNumber=null,e.i=null,e.selectedNumbers=[],e.comparisonSymbols=[">","<","="],e.isnumber=!0,e.NumofAns=0,e}return i(e,t),e.prototype.start=function(){this.isnumber=Math.random()<.5,this.bindTouch(),this.generateQuestion(),this.updateUI()},e.prototype.nextLevel=function(){return s(this,void 0,void 0,function(){var t;return a(this,function(){for(this.isnumber=Math.random()<.5,this.generateQuestion(),this.updateUI(),t=0;t<this.imageNodes.length;t++)this.imageNodes[t].active=!0;return this.pole.angle=0,this.leftScaleNode.skewX=0,this.rightScaleNode.skewX=0,this.leftScaleNode.skewY=0,this.rightScaleNode.skewY=0,[2]})})},e.prototype.updateUI=function(){this.isnumber?(this.leftScaleLabel.string=this.leftNumber.toString(),this.selectLabel0.string=this.selectnumber0.toString(),this.selectLabel1.string=this.selectnumber1.toString(),this.selectLabel2.string=this.selectnumber2.toString(),this.answer.active=!1):(this.leftScaleLabel.string=Math.floor(10*Math.random()).toString(),this.answer.getChildByName("AnswerNumber").getComponent(cc.Label).string=Math.floor(10*Math.random()).toString(),this.answer.active=!0,this.signNode.active=!1,this.selectLabel0.string=this.comparisonSymbols[0],this.selectLabel1.string=this.comparisonSymbols[1],this.selectLabel2.string=this.comparisonSymbols[2])},e.prototype.generateQuestion=function(){var t=this;this.generateUniqueRandomNumbers(),this.comparisonSymbolIndex=Math.floor(Math.random()*this.comparisonSymbolSprites.length),this.signNode.getComponent(cc.Sprite).spriteFrame=this.comparisonSymbolSprites[this.comparisonSymbolIndex],console.log("index"+this.comparisonSymbolIndex);var e=[this.selectnumber0,this.selectnumber1,this.selectnumber2];switch(this.comparisonSymbolIndex){case 0:this.leftNumber=Math.max.apply(Math,e);break;case 1:this.leftNumber=Math.min.apply(Math,e);break;case 2:this.leftNumber=e.find(function(e){return e===t.leftNumber})}},e.prototype.generateUniqueRandomNumbers=function(){var t,e=this;this.comparisonSymbolIndex=Math.floor(Math.random()*this.comparisonSymbolSprites.length),this.leftNumber=Math.floor(10*Math.random());for(var n=Array.from({length:9},function(t,e){return e}).filter(function(t){return t!==e.leftNumber}),o=[];o.length<2;){var i=Math.floor(Math.random()*n.length);o.push(n[i]),n.splice(i,1)}for(var r=[this.leftNumber,o[0],o[1]],s=r.length-1;s>0;s--){var a=Math.floor(Math.random()*(s+1));t=[r[a],r[s]],r[s]=t[0],r[a]=t[1]}this.selectnumber0=r[0],this.selectnumber1=r[1],this.selectnumber2=r[2]},e.prototype.bindTouch=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},e.prototype.onTouchStart=function(){this.isTouching=!0},e.prototype.onTouchMove=function(t){if(this.isTouching)for(var e=t.getLocation(),n=0;n<this.imageNodes.length;n++){var o=this.imageNodes[n].convertToNodeSpaceAR(new cc.Vec2(e.x,e.y));o.x>=-60&&o.x<=60&&o.y>=-60&&o.y<=60&&console.log("\u6478\u5230\u4e86")}},e.prototype.onTouchEnd=function(t){this.isTouching=!1;for(var e=t.getLocation(),n=0;n<this.imageNodes.length;n++){var o=this.imageNodes[n].convertToNodeSpaceAR(new cc.Vec2(e.x,e.y));o.x>=-60&&o.x<=60&&o.y>=-60&&o.y<=60&&(this.i=n,this.showAnswer(),cc.audioEngine.play(this.music[1],!1,1))}},e.prototype.showAnswer=function(){this.isnumber?this.numberShowAnwer():this.signShowAnwer()},e.prototype.signShowAnwer=function(){return s(this,void 0,void 0,function(){var t,e,n;return a(this,function(o){switch(o.label){case 0:return this.titlelabel=this.title.getComponent(cc.Label),this.answerlabel=this.answer.getChildByName("AnswerNumber").getComponent(cc.Label),t=parseInt(this.titlelabel.string),e=parseInt(this.answerlabel.string),n=this.comparisonSymbols[this.i],this.signNode.getComponent(cc.Sprite).spriteFrame=this.comparisonSymbolSprites[this.i],this.signNode.active=!0,">"!==n?[3,5]:t>e?(this.NumofAns++,[4,this.playCorrectAnimation("left")]):[3,3];case 1:return o.sent(),[4,this.wait(2)];case 2:return o.sent(),this.nextLevel(),[3,4];case 3:this.playWrongAnimation(),this.NumofAns=0,o.label=4;case 4:return[3,13];case 5:return"<"!==n?[3,10]:t<e?(this.NumofAns++,[4,this.playCorrectAnimation("right")]):[3,8];case 6:return o.sent(),[4,this.wait(2)];case 7:return o.sent(),this.nextLevel(),[3,9];case 8:this.playWrongAnimation(),this.NumofAns=0,o.label=9;case 9:return[3,13];case 10:return"="!==n?[3,13]:t!==e?[3,12]:(this.NumofAns++,[4,this.wait(1)]);case 11:return o.sent(),this.nextLevel(),[3,13];case 12:this.playWrongAnimation(),this.NumofAns=0,o.label=13;case 13:return[2]}})})},e.prototype.numberShowAnwer=function(){return s(this,void 0,void 0,function(){var t,e,n;return a(this,function(o){switch(o.label){case 0:return this.answer.getChildByName("AnswerNumber").getComponent(cc.Label).string=this.imageNodes[this.i].getChildByName("number").getComponent(cc.Label).string,this.answer.active=!0,this.titlelabel=this.title.getComponent(cc.Label),this.answerlabel=this.answer.getChildByName("AnswerNumber").getComponent(cc.Label),t=parseInt(this.titlelabel.string),e=parseInt(this.answerlabel.string),n=this.comparisonSymbols[this.comparisonSymbolIndex],console.log(n,t,e),">"!==n?[3,5]:t>e?(this.NumofAns++,[4,this.playCorrectAnimation("left")]):[3,3];case 1:return o.sent(),[4,this.wait(2)];case 2:return o.sent(),this.nextLevel(),[3,4];case 3:this.playWrongAnimation(),this.NumofAns=0,o.label=4;case 4:return[3,13];case 5:return"<"!==n?[3,10]:t<e?(this.NumofAns++,[4,this.playCorrectAnimation("right")]):[3,8];case 6:return o.sent(),[4,this.wait(2)];case 7:return o.sent(),this.nextLevel(),[3,9];case 8:this.playWrongAnimation(),this.NumofAns=0,o.label=9;case 9:return[3,13];case 10:return"="!==n?[3,13]:t!==e?[3,12]:(this.NumofAns++,[4,this.wait(1)]);case 11:return o.sent(),this.nextLevel(),[3,13];case 12:this.playWrongAnimation(),this.NumofAns=0,o.label=13;case 13:return[2]}})})},e.prototype.wait=function(t){return s(this,void 0,void 0,function(){return a(this,function(){return[2,new Promise(function(e){setTimeout(function(){e()},1e3*t)})]})})},e.prototype.playCorrectAnimation=function(t){return s(this,void 0,void 0,function(){var e,n,o;return a(this,function(i){switch(i.label){case 0:return[4,this.wait(1)];case 1:return i.sent(),cc.audioEngine.play(this.music[0],!1,1),e=30,"right"===t&&(e=-30),cc.tween(this.pole).by(1.5,{angle:e}).start(),n=-15,o=15,"left"===t&&(n=15,o=-15),cc.tween(this.leftScaleNode).to(1.5,{skewX:n,skewY:o}).start(),cc.tween(this.rightScaleNode).to(1.5,{skewX:-n,skewY:-o}).start(),[2]}})})},e.prototype.playWrongAnimation=function(){var t=this,e=this.pole.position;cc.tween(this.pole).to(.05,{position:cc.v2(e.x+5,e.y)}).to(.05,{position:cc.v2(e.x-5,e.y)}).to(.05,{position:cc.v2(e.x+5,e.y)}).to(.05,{position:cc.v2(e.x-5,e.y)}).call(function(){t.imageNodes[t.i].active=!1}).start()},e.prototype.Animation=function(){},e.prototype.close=function(){this.node.destroy()},r([h([cc.AudioClip])],e.prototype,"music",void 0),r([h(cc.Label)],e.prototype,"leftScaleLabel",void 0),r([h(cc.Label)],e.prototype,"rightNumberLabel",void 0),r([h(cc.Label)],e.prototype,"selectLabel0",void 0),r([h(cc.Label)],e.prototype,"selectLabel1",void 0),r([h(cc.Label)],e.prototype,"selectLabel2",void 0),r([h(cc.Node)],e.prototype,"pole",void 0),r([h(cc.Node)],e.prototype,"answer",void 0),r([h(cc.Node)],e.prototype,"title",void 0),r([h([cc.Node])],e.prototype,"imageNodes",void 0),r([h(cc.Node)],e.prototype,"leftScaleNode",void 0),r([h(cc.Node)],e.prototype,"rightScaleNode",void 0),r([h(cc.Node)],e.prototype,"signNode",void 0),r([h(cc.SpriteFrame)],e.prototype,"comparisonSymbolSprites",void 0),r([l],e)}(cc.Component);n.default=u,cc._RF.pop()},{}]},{},["KSGame05"]);
window.__require=function t(e,o,i){function n(s,l){if(!o[s]){if(!e[s]){var c=s.split("/");if(c=c[c.length-1],!e[c]){var a="function"==typeof __require&&__require;if(!l&&a)return a(c,!0);if(r)return r(c,!0);throw new Error("Cannot find module '"+s+"'")}s=c}var h=o[s]={exports:{}};e[s][0].call(h.exports,function(t){return n(e[s][1][t]||t)},h,h.exports,t,e,o,i)}return o[s].exports}for(var r="function"==typeof __require&&__require,s=0;s<i.length;s++)n(i[s]);return n}({KSGame05:[function(t,e,o){"use strict";cc._RF.push(e,"cb1dfw498NGDoOKRyiD5KaD","KSGame05");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var l=t.length-1;l>=0;l--)(n=t[l])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,l=s.ccclass,c=s.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.leftScaleLabel=null,e.rightNumberLabel=null,e.selectLabel0=null,e.selectLabel1=null,e.selectLabel2=null,e.pole=null,e.answer=null,e.title=null,e.imageNodes=[],e.leftScaleNode=null,e.rightScaleNode=null,e.signNode=null,e.comparisonSymbolSprites=[],e.isTouching=!1,e.titlelabel=null,e.answerlabel=null,e.selectNumber=null,e.i=null,e.selectedNumbers=[],e.comparisonSymbols=[">","<","="],e.isnumber=!0,e}return n(e,t),e.prototype.start=function(){this.bindTouch(),this.generateQuestion(),this.updateUI()},e.prototype.updateUI=function(){this.isnumber?(this.leftScaleLabel.string=this.leftNumber.toString(),this.selectLabel0.string=this.selectnumber0.toString(),this.selectLabel1.string=this.selectnumber1.toString(),this.selectLabel2.string=this.selectnumber2.toString()):(this.leftScaleLabel.string=Math.floor(10*Math.random()).toString(),this.answer.getChildByName("AnswerNumber").getComponent(cc.Label).string=Math.floor(10*Math.random()).toString(),this.answer.active=!0,this.signNode.active=!1,this.selectLabel0.string=this.comparisonSymbols[0],this.selectLabel1.string=this.comparisonSymbols[1],this.selectLabel2.string=this.comparisonSymbols[2])},e.prototype.generateQuestion=function(){var t=this;this.generateUniqueRandomNumbers(),this.comparisonSymbolIndex=Math.floor(Math.random()*this.comparisonSymbolSprites.length),this.signNode.getComponent(cc.Sprite).spriteFrame=this.comparisonSymbolSprites[this.comparisonSymbolIndex],console.log("index"+this.comparisonSymbolIndex);var e=[this.selectnumber0,this.selectnumber1,this.selectnumber2];switch(this.comparisonSymbolIndex){case 0:this.leftNumber=Math.max.apply(Math,e);break;case 1:this.leftNumber=Math.min.apply(Math,e);break;case 2:this.leftNumber=e.find(function(e){return e===t.leftNumber})}},e.prototype.generateUniqueRandomNumbers=function(){var t,e=this;this.comparisonSymbolIndex=Math.floor(Math.random()*this.comparisonSymbolSprites.length),this.leftNumber=Math.floor(10*Math.random());for(var o=Array.from({length:9},function(t,e){return e}).filter(function(t){return t!==e.leftNumber}),i=[];i.length<2;){var n=Math.floor(Math.random()*o.length);i.push(o[n]),o.splice(n,1)}for(var r=[this.leftNumber,i[0],i[1]],s=r.length-1;s>0;s--){var l=Math.floor(Math.random()*(s+1));t=[r[l],r[s]],r[s]=t[0],r[l]=t[1]}this.selectnumber0=r[0],this.selectnumber1=r[1],this.selectnumber2=r[2]},e.prototype.bindTouch=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},e.prototype.onTouchStart=function(){this.isTouching=!0},e.prototype.onTouchMove=function(t){if(this.isTouching)for(var e=t.getLocation(),o=0;o<this.imageNodes.length;o++){var i=this.imageNodes[o].convertToNodeSpaceAR(new cc.Vec2(e.x,e.y));i.x>=-60&&i.x<=60&&i.y>=-60&&i.y<=60&&console.log("\u6478\u5230\u4e86")}},e.prototype.onTouchEnd=function(t){this.isTouching=!1;for(var e=t.getLocation(),o=0;o<this.imageNodes.length;o++){var i=this.imageNodes[o].convertToNodeSpaceAR(new cc.Vec2(e.x,e.y));i.x>=-60&&i.x<=60&&i.y>=-60&&i.y<=60&&(this.i=o,this.showAnswer())}},e.prototype.showAnswer=function(){this.isnumber?this.numberShowAnwer():this.signShowAnwer()},e.prototype.signShowAnwer=function(){this.titlelabel=this.title.getComponent(cc.Label),this.answerlabel=this.answer.getChildByName("AnswerNumber").getComponent(cc.Label);var t=parseInt(this.titlelabel.string),e=parseInt(this.answerlabel.string),o=this.comparisonSymbols[this.i];this.signNode.getComponent(cc.Sprite).spriteFrame=this.comparisonSymbolSprites[this.i],this.signNode.active=!0,">"===o?t>e?this.playCorrectAnimation("left"):this.playWrongAnimation():"<"===o?t<e?this.playCorrectAnimation("right"):this.playWrongAnimation():"="===o&&(t===e?console.log("right"):this.playWrongAnimation())},e.prototype.numberShowAnwer=function(){this.answer.getChildByName("AnswerNumber").getComponent(cc.Label).string=this.imageNodes[this.i].getChildByName("number").getComponent(cc.Label).string,this.answer.active=!0,this.titlelabel=this.title.getComponent(cc.Label),this.answerlabel=this.answer.getChildByName("AnswerNumber").getComponent(cc.Label);var t=parseInt(this.titlelabel.string),e=parseInt(this.answerlabel.string),o=this.comparisonSymbols[this.comparisonSymbolIndex];console.log(o,t,e),">"===o?t>e?this.playCorrectAnimation("left"):this.playWrongAnimation():"<"===o?t<e?this.playCorrectAnimation("right"):this.playWrongAnimation():"="===o&&(t===e?console.log("right"):this.playWrongAnimation())},e.prototype.playCorrectAnimation=function(t){var e=30;"right"===t&&(e=-30),cc.tween(this.pole).by(1,{angle:e}).start();var o=-15,i=15;"left"===t&&(o=15,i=-15),cc.tween(this.leftScaleNode).to(1,{skewX:o,skewY:i}).start(),cc.tween(this.rightScaleNode).to(1,{skewX:-o,skewY:-i}).start()},e.prototype.playWrongAnimation=function(){var t=cc.sequence(cc.moveBy(.05,cc.v2(5,0)),cc.moveBy(.05,cc.v2(-5,0))).repeat(2);this.pole.runAction(t),this.imageNodes[this.i].active=!1},e.prototype.Animation=function(){},e.prototype.close=function(){this.node.destroy()},r([c(cc.Label)],e.prototype,"leftScaleLabel",void 0),r([c(cc.Label)],e.prototype,"rightNumberLabel",void 0),r([c(cc.Label)],e.prototype,"selectLabel0",void 0),r([c(cc.Label)],e.prototype,"selectLabel1",void 0),r([c(cc.Label)],e.prototype,"selectLabel2",void 0),r([c(cc.Node)],e.prototype,"pole",void 0),r([c(cc.Node)],e.prototype,"answer",void 0),r([c(cc.Node)],e.prototype,"title",void 0),r([c([cc.Node])],e.prototype,"imageNodes",void 0),r([c(cc.Node)],e.prototype,"leftScaleNode",void 0),r([c(cc.Node)],e.prototype,"rightScaleNode",void 0),r([c(cc.Node)],e.prototype,"signNode",void 0),r([c(cc.SpriteFrame)],e.prototype,"comparisonSymbolSprites",void 0),r([l],e)}(cc.Component);o.default=a,cc._RF.pop()},{}]},{},["KSGame05"]);